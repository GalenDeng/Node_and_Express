## express使用 (2017.10.30)
* Express基于Connect为构建整个网站及Web应用提供了更为方便的API
* Express保持了重用中间件来完成基础任务的能力
* URL + method = 路由
* EJS : 模板语言
* superagent : 简化向Twitter发送HTTP查询请求的实现

1. `ejs模板介绍`
```
你能够在 <%...%> 块中安排 JavaScript 代码，利用最传统的方式 <%=输出变量%>（另外 <%-输
出变量是不会对 & 等符号进行转义的）。安装 EJS 命令如下：
npm install ejs
```
2. `render方法`
* res.render('index');
* 作用
```
* 初始化模板引擎
* 读取视图文件并将其传递给模板引擎
* 获取解析后的HTML页面并作为响应发送给客户端
```
3. `提高性能,让express将模板缓存起来，加快响应速度`
```
var app = require('express')
app.configure('production',function() {
  app.enable('view cache')
})

***
当环境变量：NODE_ENV=production , app.configure定义的回调函数就会被执行
```
* 等同于：
```
var app = require('express')
app.set('view cache',true)
```
* 查看配置标志是否启动，调用 app.enabled或app.disaled方法
* 测试上述代码,运行以下的命令
```
NODE_ENV = production node server
```
* 若不配置，则默认使用 development的配置
4. `模板引擎`
* express中可以使用 ejs、Haml、Jade、CoffeeKup、jQuery Templates for node等模板引擎
* express会试着以模板文件扩展名或者以配置的view engine 的值为名去调用require方法
```
example:
* res.render('index.html')
* 此时，express会尝试去require html引擎，找不到该引擎，就会报错
* 将扩展名匹配到指定的模板引擎中，如 app.register('.html',require('Jade')); express2用app.register express3用app.engine
``` 
5. `错误处理`
```
在Node中，将错误对象作为非阻塞I/O回调函数的第一个参数是很常见的.
```
6. `express提供给Request对象的一系列扩展`
* req.header('Host') or req.header('host')
```
header: 此扩展能够让程序以函数的方式获取头信息，且大小写不敏感
```
* req.accepts('html')   req.accepts('text/html')
```
此扩展会分析请求中的Accept头信息，并根据提供的值返回true或者false
```
* req.is('json')  req.is('text/html')
```
此扩展和accepts类似，但它检查Content-Type头信息
```
7. `express提供给Response对象的一系列扩展`

